<?php
/*
 * Gallery - a web based photo album viewer and editor
 * Copyright (C) 2000-2008 Bharat Mediratta
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or (at
 * your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA  02110-1301, USA.
 */

/**
 * Base class for installation step
 * @package Install
 * @abstract
 */
class InstallStep {
	public $_stepNumber;
	public $_isComplete;
	public $_isInError;
	public $_isLastStep;

	public function isComplete() {
		return $this->_isComplete;
	}

	public function isRedoable() {
		return false;
	}

	public function setComplete($complete) {
		$this->_isComplete = $complete;
	}

	public function canBeVisited() {
		return true;
	}

	public function setInError($inError) {
		$this->_isInError = $inError;
	}

	public function isInError() {
		return $this->_isInError;
	}

	public function stepName() {
		return _('Unknown');
	}

	public function setStepNumber($stepNumber) {
		$this->_stepNumber = $stepNumber;
	}

	public function getStepNumber() {
		return $this->_stepNumber;
	}

	public function processRequest() {
		return true; // true means continue rendering the page
	}

	public function loadTemplateData(&$templateData) {
		return null;
	}

	public function getActions() {
		return array();
	}

	public function setIsLastStep($lastStep) {
		$this->_isLastStep = $lastStep;
	}

	public function isLastStep() {
		return $this->_isLastStep;
	}

	public function loadGalleryConfig($config) {
	}

	public function sanitize($string) {
		if (get_magic_quotes_gpc()) {
			$string = stripslashes($string);
		}

		return $string;
	}

	public function isRelevant() {
		return true;
	}

	public function isOptional() {
		return false;
	}

	public function resetL10Domain() {
		// Reset to installer domain in case we called some code that may have done translation
		if (function_exists('textdomain')) {
			textdomain('gallery2_install');
		}
	}
}
